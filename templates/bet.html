<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Bookmakers aggregator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="logo"><a href="/">DataBet</a></div>
        <ul class="nav-links">
            <div class="menu">
                <li><a href="/bet">Коэффициенты</a></li>
                <li><a href="/info">Информация</a></li>
            </div>
        </ul>
    </nav>

    <main>
        <div class="selector" align="middle">
            <br>
            <div class="input" align="middle">

                {% if select1 is none %}
                <form action="" method="POST">
                    <label>Команды:</label>
                    <br>
                        <p>Команда 1:</p>
                        <select name="select-1">
                            <optgroup>
                                <option>{{ select1 }}</option>
                                {% for country1 in countries1%}
                                <option>{{ country1 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </br>
                    <br>
                    <input type="submit" value="submit">
                    </br>
                </form>
                {% endif %}

                {% if (select1 is not none) and (select2 is none) %}
                <form action="" method="POST">
                    <label>Команды:</label>
                    <br>
                        <p>Команда 1:</p>
                        <select name="select-1">
                            <optgroup>
                                <option>{{ select1 }}</option>
                                {% for country1 in countries1%}
                                <option value={{ country1 }}>{{ country1 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>

                        <p>Команда 2:</p>
                        <select name="select-2">
                            <optgroup>
                                <option>{{ select2 }}</option>
                                {% for country2 in countries2%}
                                <option value={{ country2 }}>{{ country2 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </br>
                    <br>
                    <input type="submit" value="submit">
                    </br>
                </form>
                {% endif %}

                {% if (select2 is not none) and (deposit is none) %}
                <form action="" method="POST">
                    <label>Команды:</label>

                    <br>
                        <p>Команда 1:</p>
                        <select name="select-1">
                            <optgroup>
                                <option>{{ select1 }}</option>
                                {% for country1 in countries1%}
                                <option value={{ country1 }}>{{ country1 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>

                        <p>Команда 2:</p>
                        <select name="select-2">
                            <optgroup>
                                <option>{{ select2 }}</option>
                                {% for country2 in countries2%}
                                <option value={{ country2 }}>{{ country2 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </br>

                    <label>Депозит:</label>
                    <br>
                        <input type="number" step="1" min="1" max="100000" value="10000" name="deposit"/>
                    </br>
                    <br>
                        <input type="submit" value="submit">
                    </br>
                </form>
                {% endif %}

                {% if (deposit is not none) and (coef2 is none) %}
                <form action="" method="POST">
                    <label>Команды:</label>

                    <br>
                        <p>Команда 1:</p>
                        <select name="select-1">
                            <optgroup>
                                <option>{{ select1 }}</option>
                                {% for country1 in countries1%}
                                <option value={{ country1 }}>{{ country1 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>

                        <p>Команда 2:</p>
                        <select name="select-2">
                            <optgroup>
                                <option>{{ select2 }}</option>
                                {% for country2 in countries2%}
                                <option value={{ country2 }}>{{ country2 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </br>

                    <label>Депозит:</label>
                    <br>
                        <input type="number" step="1" min="1" max="100000" value={{ deposit }} name="deposit"/>
                    </br>

                    <label>Коэффициенты:</label>
                    <br>
                        <p>Коэффициент на команду 1:</p>
                        <br>
                            <input type="number" step="any" value={{ best_coef[0] }} name="coef-1"/>
                        </br>

                        <p>Коэффициент на ничью:</p>
                        <br>
                            <input type="number" step="any" value={{ best_coef[1] }} name="draw"/>
                        </br>

                        <p>Коэффициент на команду 2:</p>
                        <br>
                            <input type="number" step="any" value={{ best_coef[2] }} name="coef-2"/>
                        </br>

                    </br>

                    <br>
                    <input type="submit" value="submit">
                    </br>

                </form>
                {% endif %}

                {% if coef2 is not none %}
                <form action="" method="POST">
                    <label>Команды:</label>

                    <br>
                        <p>Команда 1:</p>
                        <select name="select-1">
                            <optgroup>
                                <option>{{ select1 }}</option>
                                {% for country1 in countries1%}
                                <option value={{ country1 }}>{{ country1 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>

                        <p>Команда 2:</p>
                        <select name="select-2">
                            <optgroup>
                                <option>{{ select2 }}</option>
                                {% for country2 in countries2%}
                                <option value={{ country2 }}>{{ country2 }}</option>
                                {% endfor %}
                            </optgroup>
                        </select>
                    </br>

                    <label>Депозит:</label>
                    <br>
                        <input type="number" step="1" min="1" max="100000" value={{ deposit }} name="deposit"/>
                    </br>

                    <label>Коэффициенты:</label>
                    <br>
                        <p>Коэффициент на команду 1:</p>
                        <br>
                            <input type="number" step="any" value={{ coef1 }} name="coef-1"/>
                        </br>

                        <p>Коэффициент на ничью:</p>
                        <br>
                            <input type="number" step="any" value={{ draw }} name="draw"/>
                        </br>

                        <p>Коэффициент на команду 2:</p>
                        <br>
                            <input type="number" step="any" value={{ coef2 }} name="coef-2"/>
                        </br>

                    </br>

                    <br>
                    <input type="submit" value="submit">
                    </br>

                </form>
                {% endif %}

            </div>
            </br>

            <br>
            <div class="output" align="right">

            {% if indexes is not none %}
                <div align="middle">

                    <h1>Таблица коэффициентов</h1>

                    <br>
                    <div class="table" vspace="60">
                        <table id="table_id" class="display">
                            <thead>
                            <tr>
                                <th></th>
                                <th><button onclick="sortTable(1)">{{ select1 }}</button></th>
                                <th><button onclick="sortTable(2)">Ничья</button></th>
                                <th><button onclick="sortTable(3)">{{ select2 }}</button></th>
                                <th><button onclick="sortTable(4)">Маржа</button></th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for index in indexes%}
                            <tr>
                                <td><a href={{ link[index] }}><img src={{ logo[index] }} width="100"></a></td>
                                <td>{{ tcoef1[index] }}</td>
                                <td>{{ tdraw[index] }}</td>
                                <td>{{ tcoef2[index] }}</td>
                                <td>{{ marga[index] }} %</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    </br>
                </div>

                <div align="middle">
                    <br>
                    {% if (indexes|length > 0) and (indexes2 is none) %}
                    <div class="fork" vspace="60">
                        <h1>Вилок нет!</h1>
                    </div>
                    {% endif %}

                    {% if (indexes|length > 0) and (indexes2 is not none) %}
                    <div class="fork" vspace="60">
                        <h2>Есть вилка!</h2>
                        <br>
                            <table>
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>{{ select1 }}</th>
                                    <th>Ничья</th>
                                    <th>{{ select2 }}</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>Лучшие <br/> коэффициенты:</td>
                                    <td>{{ best_coef[0] }}</br><a href={{ best_link[0] }}><img src={{ best_logo[0] }} width="100"></a></td>
                                    <td>{{ best_coef[1] }}</br><a href={{ best_link[1] }}><img src={{ best_logo[1] }} width="100"></a></td>
                                    <td>{{ best_coef[2] }}</br><a href={{ best_link[2] }}><img src={{ best_logo[2] }} width="100"></a></td>
                                </tr>
                                </tbody>
                            </table>
                        </br>
                    </div>
                    {% endif %}

                    {% if coefs is not none %}
                    <div class="table" vspace="60">
                        <br>
                            <table>
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>Команда 1</th>
                                    <th>Ничья</th>
                                    <th>Команда 2</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>Коэффициенты:</td>
                                    <td>{{ coefs[0] }}</td>
                                    <td>{{ coefs[1] }}</td>
                                    <td>{{ coefs[2] }}</td>
                                </tr>
                                <tr>
                                    <td>Ставка:</td>
                                    <td>{{ best_bet[0] }}</td>
                                    <td>{{ best_bet[1] }}</td>
                                    <td>{{ best_bet[2] }}</td>
                                </tr>
                                <tr>
                                    <td>Чистый выигрыш:</td>
                                    <td>{{ profit[0] }}</td>
                                    <td>{{ profit[1] }}</td>
                                    <td>{{ profit[2] }}</td>
                                </tr>
                                </tbody>
                            </table>
                        </br>
                    </div>
                    {% endif %}

                    </br>
                </div>
            {% endif %}

            </div>
            </br>

        </div>

    </main>
    <script>
    function sortTable(num) {
      var table, rows, switching, i, x, y, shouldSwitch;
      table = document.getElementById("table_id");
      switching = true;
      while (switching) {
        switching = false;
        rows = table.rows;
        for (i = 1; i < (rows.length - 1); i++) {
          shouldSwitch = false;
          x = rows[i].getElementsByTagName("TD")[num];
          y = rows[i + 1].getElementsByTagName("TD")[num];
          if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
            shouldSwitch = true;
            break;
          }
        }
        if (shouldSwitch) {
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
        }
      }
    }
    </script>
</body>
</html>